<?xml version="1.0" encoding="UTF-8"?>
<svg width="2000px" height="600px" viewBox="0 0 2000 600" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink">

  <defs>
    <symbol id="icon-context" viewBox="0 0 24 24"><path d="M4 7v10c0 1.1.9 2 2 2h12c1.1 0 2-.9 2-2V7c0-1.1-.9-2-2-2H6c-1.1 0-2 .9-2 2z"></path><path d="M12 14l-4-3h8l-4 3z"></path></symbol>
    <symbol id="icon-analysis" viewBox="0 0 24 24"><path d="M12 2L9 9l-7 3 7 3 3 7 3-7 7-3-7-3-3-7z" /></symbol>
    <symbol id="icon-action" viewBox="0 0 24 24"><path d="M6 20v-4M12 20V10M18 20V4"></path></symbol>
    <symbol id="icon-goal" viewBox="0 0 24 24"><path d="M22 11.08V12a10 10 0 1 1-5.93-9.14"></path><polyline points="22 4 12 14.01 9 11.01"></polyline></symbol>
  </defs>

  <style>
    .diagram-font { font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, Helvetica, Arial, sans-serif, "Apple Color Emoji", "Segoe UI Emoji"; text-rendering: optimizeLegibility; -webkit-font-smoothing: antialiased; }
    
    /* Light Mode */
    .stage-title, .detail-title { fill: #1e293b; }
    .stage-subtitle, .detail-subtitle { fill: #475569; }
    .stage-box { fill: #f8fafc; stroke: #e2e8f0; }
    .detail-box-context { background-color: #fffbeb; border: 1px solid #fcd34d; }
    .detail-box-analysis { background-color: #fef2f2; border: 1px solid #fca5a5; }
    .detail-box-action { background-color: #f0fdf4; border: 1px solid #86efac; }
    .detail-box-goal { background-color: #eef2ff; border: 1px solid #a5b4fc; }
    .arrow-path { stroke: #94a3b8; }
    #arrowhead polygon { fill: #94a3b8; }
    .icon-main { stroke: #0ea5e9; }

    /* Dark Mode */
    @media (prefers-color-scheme: dark) {
      .stage-title, .detail-title { fill: #f1f5f9; }
      .stage-subtitle, .detail-subtitle { fill: #94a3b8; }
      .stage-box { fill: #0f172a; stroke: #334155; }
      .detail-box-context { background-color: #422006; border: 1px solid #fcd34d; }
      .detail-box-analysis { background-color: #450a0a; border: 1px solid #fca5a5; }
      .detail-box-action { background-color: #14532d; border: 1px solid #86efac; }
      .detail-box-goal { background-color: #312e81; border: 1px solid #a5b4fc; }
      .arrow-path { stroke: #64748b; }
      #arrowhead polygon { fill: #64748b; }
      .icon-main { stroke: #38bdf8; }
    }
  </style>

  <defs>
    <marker id="arrowhead" markerWidth="10" markerHeight="7" refX="0" refY="3.5" orient="auto">
      <polygon points="0 0, 10 3.5, 0 7" />
    </marker>
  </defs>

  <!-- Stage 1: Context -->
  <g transform="translate(30, 50)">
    <rect class="stage-box" width="450" height="500" rx="12" ry="12"/>
    <use xlink:href="#icon-context" class="icon-main" stroke-width="1.5" fill="none" x="30" y="30" width="40" height="40"/>
    <text x="85" y="50" class="stage-title diagram-font" font-size="20" font-weight="bold">1. Provide Context</text>
    <text x="85" y="75" class="stage-subtitle diagram-font" font-size="14">User provides schemas, statistics, and business rules.</text>

    <foreignObject x="30" y="140" width="180" height="120">
      <div xmlns="http://www.w3.org/1999/xhtml" class="detail-box-context diagram-font" style="border-radius: 8px; padding: 12px; height: 100%;">
        <p class="detail-title" style="font-size: 14px; font-weight: bold; margin: 0 0 4px 0;">Provide Data Context</p>
        <p class="detail-subtitle" style="font-size: 12px; line-height: 1.4; margin: 0;">User inputs metadata, statistics, and business rules.</p>
      </div>
    </foreignObject>
    <foreignObject x="250" y="100" width="170" height="120">
       <div xmlns="http://www.w3.org/1999/xhtml" class="detail-box-context diagram-font" style="border-radius: 8px; padding: 12px; height: 100%;">
        <p class="detail-title" style="font-size: 14px; font-weight: bold; margin: 0 0 4px 0;">Manual Entry</p>
        <p class="detail-subtitle" style="font-size: 12px; line-height: 1.4; margin: 0;">Type or paste details directly into the form.</p>
      </div>
    </foreignObject>
    <foreignObject x="250" y="240" width="170" height="120">
      <div xmlns="http://www.w3.org/1999/xhtml" class="detail-box-context diagram-font" style="border-radius: 8px; padding: 12px; height: 100%;">
        <p class="detail-title" style="font-size: 14px; font-weight: bold; margin: 0 0 4px 0;">File Upload</p>
        <p class="detail-subtitle" style="font-size: 12px; line-height: 1.4; margin: 0;">Import context via .sql and .csv files for efficiency.</p>
      </div>
    </foreignObject>

    <path d="M210 200 C 230 180, 230 180, 249 160" class="arrow-path" stroke-width="2" fill="none" marker-end="url(#arrowhead)"/>
    <path d="M210 200 C 230 220, 230 220, 249 240" class="arrow-path" stroke-width="2" fill="none" marker-end="url(#arrowhead)"/>
  </g>

  <!-- Arrow 1 -> 2 -->
  <path d="M480 300 L 519 300" class="arrow-path" stroke-width="3" fill="none" marker-end="url(#arrowhead)"/>

  <!-- Stage 2: Analysis -->
  <g transform="translate(520, 50)">
    <rect class="stage-box" width="450" height="500" rx="12" ry="12"/>
    <use xlink:href="#icon-analysis" class="icon-main" stroke-width="1.5" fill="none" x="30" y="30" width="40" height="40"/>
    <text x="85" y="50" class="stage-title diagram-font" font-size="20" font-weight="bold">2. AI Analysis</text>
    <text x="85" y="75" class="stage-subtitle diagram-font" font-size="14">The app constructs a rich prompt and queries the AI.</text>
    
    <foreignObject x="30" y="240" width="120" height="120">
      <div xmlns="http://www.w3.org/1999/xhtml" class="detail-box-analysis diagram-font" style="border-radius: 8px; padding: 12px; height: 100%;">
        <p class="detail-title" style="font-size: 14px; font-weight: bold; margin: 0 0 4px 0;">Trigger Analysis</p>
        <p class="detail-subtitle" style="font-size: 12px; line-height: 1.4; margin: 0;">Click 'Analyze' to start the AI quality assessment.</p>
      </div>
    </foreignObject>
    <foreignObject x="170" y="240" width="120" height="120">
      <div xmlns="http://www.w3.org/1999/xhtml" class="detail-box-analysis diagram-font" style="border-radius: 8px; padding: 12px; height: 100%;">
        <p class="detail-title" style="font-size: 14px; font-weight: bold; margin: 0 0 4px 0;">Gemini Processing</p>
        <p class="detail-subtitle" style="font-size: 12px; line-height: 1.4; margin: 0;">The app sends a detailed, context-rich prompt for each table to the AI.</p>
      </div>
    </foreignObject>
    <foreignObject x="310" y="240" width="120" height="120">
       <div xmlns="http://www.w3.org/1999/xhtml" class="detail-box-analysis diagram-font" style="border-radius: 8px; padding: 12px; height: 100%;">
        <p class="detail-title" style="font-size: 14px; font-weight: bold; margin: 0 0 4px 0;">Receive Results</p>
        <p class="detail-subtitle" style="font-size: 12px; line-height: 1.4; margin: 0;">A structured JSON response is returned with all findings.</p>
      </div>
    </foreignObject>

    <path d="M150 300 L 169 300" class="arrow-path" stroke-width="2" fill="none" marker-end="url(#arrowhead)"/>
    <path d="M290 300 L 309 300" class="arrow-path" stroke-width="2" fill="none" marker-end="url(#arrowhead)"/>
  </g>

  <!-- Arrow 2 -> 3 -->
  <path d="M970 300 L 1009 300" class="arrow-path" stroke-width="3" fill="none" marker-end="url(#arrowhead)"/>

  <!-- Stage 3: Action -->
  <g transform="translate(1010, 50)">
    <rect class="stage-box" width="450" height="500" rx="12" ry="12"/>
    <use xlink:href="#icon-action" class="icon-main" stroke-width="1.5" fill="none" x="30" y="30" width="40" height="40"/>
    <text x="85" y="50" class="stage-title diagram-font" font-size="20" font-weight="bold">3. Explore &amp; Act</text>
    <text x="85" y="75" class="stage-subtitle diagram-font" font-size="14">Visualize results, ask questions, and share findings.</text>

    <foreignObject x="30" y="240" width="180" height="120">
      <div xmlns="http://www.w3.org/1999/xhtml" class="detail-box-action diagram-font" style="border-radius: 8px; padding: 12px; height: 100%;">
        <p class="detail-title" style="font-size: 14px; font-weight: bold; margin: 0 0 4px 0;">Explore Dashboard</p>
        <p class="detail-subtitle" style="font-size: 12px; line-height: 1.4; margin: 0;">Visualize results, filter issues, and review table health scores.</p>
      </div>
    </foreignObject>
    <foreignObject x="250" y="160" width="170" height="120">
      <div xmlns="http://www.w3.org/1999/xhtml" class="detail-box-action diagram-font" style="border-radius: 8px; padding: 12px; height: 100%;">
        <p class="detail-title" style="font-size: 14px; font-weight: bold; margin: 0 0 4px 0;">Conversational AI</p>
        <p class="detail-subtitle" style="font-size: 12px; line-height: 1.4; margin: 0;">Ask follow-up questions to the integrated AI Assistant.</p>
      </div>
    </foreignObject>
    <foreignObject x="250" y="320" width="170" height="120">
       <div xmlns="http://www.w3.org/1999/xhtml" class="detail-box-action diagram-font" style="border-radius: 8px; padding: 12px; height: 100%;">
        <p class="detail-title" style="font-size: 14px; font-weight: bold; margin: 0 0 4px 0;">Export &amp; Share</p>
        <p class="detail-subtitle" style="font-size: 12px; line-height: 1.4; margin: 0;">Generate professional PDF or PowerPoint reports for stakeholders.</p>
      </div>
    </foreignObject>
    
    <path d="M210 300 C 230 280, 230 280, 249 260" class="arrow-path" stroke-width="2" fill="none" marker-end="url(#arrowhead)"/>
    <path d="M210 300 C 230 320, 230 320, 249 340" class="arrow-path" stroke-width="2" fill="none" marker-end="url(#arrowhead)"/>
  </g>

  <!-- Arrow 3 -> 4 -->
  <path d="M1460 300 L 1499 300" class="arrow-path" stroke-width="3" fill="none" marker-end="url(#arrowhead)"/>

  <!-- Stage 4: Goal -->
  <g transform="translate(1500, 50)">
    <rect class="stage-box" width="450" height="500" rx="12" ry="12"/>
    <use xlink:href="#icon-goal" class="icon-main" stroke-width="1.5" fill="none" x="30" y="30" width="40" height="40"/>
    <text x="85" y="50" class="stage-title diagram-font" font-size="20" font-weight="bold">4. Achieve Integrity</text>
    <text x="85" y="75" class="stage-subtitle diagram-font" font-size="14">Gain insights to improve and maintain data quality.</text>
    
    <foreignObject x="100" y="240" width="250" height="120">
      <div xmlns="http://www.w3.org/1999/xhtml" class="detail-box-goal diagram-font" style="border-radius: 8px; padding: 12px; height: 100%;">
        <p class="detail-title" style="font-size: 14px; font-weight: bold; margin: 0 0 4px 0;">Achieve Data Integrity</p>
        <p class="detail-subtitle" style="font-size: 12px; line-height: 1.4; margin: 0;">User gains clear, actionable insights to improve and maintain data quality.</p>
      </div>
    </foreignObject>
  </g>
</svg>