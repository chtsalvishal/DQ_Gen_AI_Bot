<?xml version="1.0" encoding="UTF-8"?>
<svg width="2000px" height="600px" viewBox="0 0 2000 600" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink">

  <defs>
    <!-- Main Stage Icons -->
    <symbol id="icon-context" viewBox="0 0 24 24"><path d="M14 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V8z"></path><polyline points="14 2 14 8 20 8"></polyline><line x1="16" y1="13" x2="8" y2="13"></line><line x1="16" y1="17" x2="8" y2="17"></line><polyline points="10 9 9 9 8 9"></polyline></symbol>
    <symbol id="icon-analysis" viewBox="0 0 24 24"><path d="M10 3L8 8l-5 2 5 2 2 5 2-5 5-2-5-2-2-5zM21 12l-2-4-4-2 4-2 2-4 2 4 4 2-4 2-2 4z" /></symbol>
    <symbol id="icon-action" viewBox="0 0 24 24"><path d="M6 20v-4M12 20V10M18 20V4"></path></symbol>
    <symbol id="icon-goal" viewBox="0 0 24 24"><path d="M22 11.08V12a10 10 0 1 1-5.93-9.14"></path><polyline points="22 4 12 14.01 9 11.01"></polyline></symbol>
    
    <!-- Detail Icons -->
    <symbol id="icon-keyboard" viewBox="0 0 24 24"><path d="M20 7V5c0-1.1-.9-2-2-2H6c-1.1 0-2 .9-2 2v2H2v10h20V7h-2zM6 5h12v2H6V5zm13 11H5V9h14v7zM8 11h2v2H8zm4 0h2v2h-2zm4 0h2v2h-2z" /></symbol>
    <symbol id="icon-upload" viewBox="0 0 24 24"><path d="M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4" /><polyline points="17 8 12 3 7 8" /><line x1="12" y1="3" x2="12" y2="15" /></symbol>
    <symbol id="icon-cpu" viewBox="0 0 24 24"><rect x="4" y="4" width="16" height="16" rx="2" ry="2"></rect><rect x="9" y="9" width="6" height="6"></rect><line x1="9" y1="1" x2="9" y2="4"></line><line x1="15" y1="1" x2="15" y2="4"></line><line x1="9" y1="20" x2="9" y2="23"></line><line x1="15" y1="20" x2="15" y2="23"></line><line x1="20" y1="9" x2="23" y2="9"></line><line x1="20" y1="14" x2="23" y2="14"></line><line x1="1" y1="9" x2="4" y2="9"></line><line x1="1" y1="14" x2="4" y2="14"></line></symbol>
    <symbol id="icon-document" viewBox="0 0 24 24"><path d="M13 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V9z"></path><polyline points="13 2 13 9 20 9"></polyline></symbol>
    <symbol id="icon-chat" viewBox="0 0 24 24"><path d="M21 15a2 2 0 0 1-2 2H7l-4 4V5a2 2 0 0 1 2-2h14a2 2 0 0 1 2 2z"></path></symbol>
    <symbol id="icon-download" viewBox="0 0 24 24"><path d="M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4" /><polyline points="7 10 12 15 17 10" /><line x1="12" y1="15" x2="12" y2="3" /></symbol>
    <symbol id="icon-shield-check" viewBox="0 0 24 24"><path d="M12 22s8-4 8-10V5l-8-3-8 3v7c0 6 8 10 8 10z" /><path d="M9 12l2 2 4-4" /></symbol>
  </defs>

  <style>
    .diagram-font { font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, Helvetica, Arial, sans-serif, "Apple Color Emoji", "Segoe UI Emoji"; text-rendering: optimizeLegibility; -webkit-font-smoothing: antialiased; }
    
    :root {
      --c-text-title: #1e293b;
      --c-text-subtitle: #475569;
      --c-text-iconlabel: #334155;
      --c-bg-stage: #f8fafc;
      --c-stroke-stage: #e2e8f0;
      --c-stroke-arrow: #94a3b8;
      --c-icon-main: #0ea5e9;
      --c-icon-detail: #475569;
    }
    
    /* Light Mode */
    .stage-title, .detail-title { fill: var(--c-text-title); }
    .stage-subtitle { fill: var(--c-text-subtitle); }
    .icon-label { fill: var(--c-text-iconlabel); }
    .stage-box { fill: var(--c-bg-stage); stroke: var(--c-stroke-stage); }
    .arrow-path, #arrowhead polygon { stroke: var(--c-stroke-arrow); fill: var(--c-stroke-arrow); }
    .icon-main { stroke: var(--c-icon-main); stroke-width:1.5; fill:none;}
    .icon-detail { stroke: var(--c-icon-detail); stroke-width:1.5; fill:none;}

    /* Dark Mode */
    @media (prefers-color-scheme: dark) {
      :root {
        --c-text-title: #f1f5f9;
        --c-text-subtitle: #94a3b8;
        --c-text-iconlabel: #cbd5e1;
        --c-bg-stage: #0f172a;
        --c-stroke-stage: #334155;
        --c-stroke-arrow: #64748b;
        --c-icon-main: #38bdf8;
        --c-icon-detail: #94a3b8;
      }
    }
  </style>

  <defs>
    <marker id="arrowhead" markerWidth="10" markerHeight="7" refX="0" refY="3.5" orient="auto">
      <polygon points="0 0, 10 3.5, 0 7" />
    </marker>
    <marker id="arrowhead-small" markerWidth="8" markerHeight="5.6" refX="0" refY="2.8" orient="auto">
      <polygon points="0 0, 8 2.8, 0 5.6" />
    </marker>
  </defs>

  <!-- Stage 1: Context -->
  <g transform="translate(30, 50)">
    <rect class="stage-box" width="450" height="500" rx="12" ry="12"/>
    <use xlink:href="#icon-context" class="icon-main" x="30" y="30" width="40" height="40"/>
    <text x="85" y="50" class="stage-title diagram-font" font-size="20" font-weight="bold">1. Provide Context</text>
    <text x="85" y="75" class="stage-subtitle diagram-font" font-size="14">User provides schemas, statistics, and business rules.</text>
    <g transform="translate(60, 250)">
      <use xlink:href="#icon-keyboard" class="icon-detail" width="60" height="60"/>
      <text x="30" y="90" class="icon-label diagram-font" font-size="14" font-weight="500" text-anchor="middle">Manual Entry</text>
    </g>
    <path d="M170 280 h 50" class="arrow-path" stroke-width="2" fill="none" marker-end="url(#arrowhead-small)"/>
    <g transform="translate(270, 250)">
      <use xlink:href="#icon-upload" class="icon-detail" width="60" height="60"/>
      <text x="30" y="90" class="icon-label diagram-font" font-size="14" font-weight="500" text-anchor="middle">File Upload</text>
    </g>
  </g>

  <!-- Arrow 1 -> 2 -->
  <path d="M480 300 L 510 300" class="arrow-path" stroke-width="2" fill="none" marker-end="url(#arrowhead-small)"/>

  <!-- Stage 2: Analysis -->
  <g transform="translate(520, 50)">
    <rect class="stage-box" width="450" height="500" rx="12" ry="12"/>
    <use xlink:href="#icon-analysis" class="icon-main" x="30" y="30" width="40" height="40"/>
    <text x="85" y="50" class="stage-title diagram-font" font-size="20" font-weight="bold">2. AI Analysis</text>
    <text x="85" y="75" class="stage-subtitle diagram-font" font-size="14">The app constructs a rich prompt and queries the AI.</text>
    
    <g transform="translate(45, 250)">
      <use xlink:href="#icon-analysis" class="icon-detail" width="60" height="60"/>
      <text x="30" y="90" class="icon-label diagram-font" font-size="14" font-weight="500" text-anchor="middle">Trigger Analysis</text>
    </g>
    <path d="M135 280 h 20" class="arrow-path" stroke-width="2" fill="none" marker-end="url(#arrowhead-small)"/>
    <g transform="translate(185, 250)">
      <use xlink:href="#icon-cpu" class="icon-detail" width="60" height="60"/>
      <text x="30" y="90" class="icon-label diagram-font" font-size="14" font-weight="500" text-anchor="middle"><tspan x="30" dy="0">Gemini</tspan><tspan x="30" dy="1.2em">Processing</tspan></text>
    </g>
    <path d="M275 280 h 20" class="arrow-path" stroke-width="2" fill="none" marker-end="url(#arrowhead-small)"/>
    <g transform="translate(325, 250)">
      <use xlink:href="#icon-document" class="icon-detail" width="60" height="60"/>
      <text x="30" y="90" class="icon-label diagram-font" font-size="14" font-weight="500" text-anchor="middle">Receive Results</text>
    </g>
  </g>

  <!-- Arrow 2 -> 3 -->
  <path d="M970 300 L 1000 300" class="arrow-path" stroke-width="2" fill="none" marker-end="url(#arrowhead-small)"/>

  <!-- Stage 3: Action -->
  <g transform="translate(1010, 50)">
    <rect class="stage-box" width="450" height="500" rx="12" ry="12"/>
    <use xlink:href="#icon-action" class="icon-main" x="30" y="30" width="40" height="40"/>
    <text x="85" y="50" class="stage-title diagram-font" font-size="20" font-weight="bold">3. Explore &amp; Act</text>
    <text x="85" y="75" class="stage-subtitle diagram-font" font-size="14">Visualize results, ask questions, and share findings.</text>

    <g transform="translate(45, 250)">
      <use xlink:href="#icon-action" class="icon-detail" width="60" height="60"/>
      <text x="30" y="90" class="icon-label diagram-font" font-size="14" font-weight="500" text-anchor="middle">Explore</text>
    </g>
    <path d="M135 280 h 20" class="arrow-path" stroke-width="2" fill="none" marker-end="url(#arrowhead-small)"/>
    <g transform="translate(185, 250)">
      <use xlink:href="#icon-chat" class="icon-detail" width="60" height="60"/>
      <text x="30" y="90" class="icon-label diagram-font" font-size="14" font-weight="500" text-anchor="middle">Ask AI</text>
    </g>
    <path d="M275 280 h 20" class="arrow-path" stroke-width="2" fill="none" marker-end="url(#arrowhead-small)"/>
    <g transform="translate(325, 250)">
      <use xlink:href="#icon-download" class="icon-detail" width="60" height="60"/>
      <text x="30" y="90" class="icon-label diagram-font" font-size="14" font-weight="500" text-anchor="middle">Export &amp; Share</text>
    </g>
  </g>

  <!-- Arrow 3 -> 4 -->
  <path d="M1460 300 L 1490 300" class="arrow-path" stroke-width="2" fill="none" marker-end="url(#arrowhead-small)"/>

  <!-- Stage 4: Goal -->
  <g transform="translate(1500, 50)">
    <rect class="stage-box" width="450" height="500" rx="12" ry="12"/>
    <use xlink:href="#icon-goal" class="icon-main" x="30" y="30" width="40" height="40"/>
    <text x="85" y="50" class="stage-title diagram-font" font-size="20" font-weight="bold">4. Achieve Integrity</text>
    <text x="85" y="75" class="stage-subtitle diagram-font" font-size="14">Gain insights to improve and maintain data quality.</text>
    
    <g transform="translate(195, 230)">
        <use xlink:href="#icon-shield-check" class="icon-detail" width="60" height="60"/>
        <text x="30" y="90" class="icon-label diagram-font" font-size="16" font-weight="600" text-anchor="middle">Improved Data Quality</text>
    </g>
  </g>
</svg>
