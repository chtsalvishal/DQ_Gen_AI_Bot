<?xml version="1.0" encoding="UTF-8"?>
<svg width="2000px" height="600px" viewBox="0 0 2000 600" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink">

  <defs>
    <marker id="arrowhead" class="arrowhead-marker" markerWidth="10" markerHeight="7" refX="0" refY="3.5" orient="auto">
      <polygon points="0 0, 10 3.5, 0 7" />
    </marker>
  </defs>

  <style>
    .diagram-font { font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, Helvetica, Arial, sans-serif, "Apple Color Emoji", "Segoe UI Emoji"; text-rendering: optimizeLegibility; -webkit-font-smoothing: antialiased; }
    
    /* Light Mode */
    .stage-title, .detail-title { fill: #1e293b; }
    .stage-subtitle { fill: #475569; }
    .stage-box { fill: #f8fafc; stroke: #e2e8f0; }
    .arrow-path { stroke: #cbd5e1; }
    .arrowhead-marker { fill: #cbd5e1; }
    .icon-main { stroke: #0ea5e9; }
    .icon-sub { stroke: #475569; }

    /* Dark Mode */
    @media (prefers-color-scheme: dark) {
      .stage-title, .detail-title { fill: #f1f5f9; }
      .stage-subtitle { fill: #94a3b8; }
      .stage-box { fill: #0f172a; stroke: #334155; }
      .arrow-path { stroke: #475569; }
      .arrowhead-marker { fill: #475569; }
      .icon-main { stroke: #38bdf8; }
      .icon-sub { stroke: #94a3b8; }
    }
  </style>

  <!-- Stage 1: Context -->
  <g transform="translate(30, 50)">
    <rect class="stage-box" width="450" height="500" rx="12" ry="12"/>
    <g class="icon-main" stroke-width="1.5" fill="none" transform="translate(30, 30) scale(1.666)">
      <path d="M20 17.58A5 5 0 0 0 18 8h-1.26A8 8 0 1 0 4 16.25" vector-effect="non-scaling-stroke" />
      <path d="M8 16.01A4.97 4.97 0 0 0 12 20a5 5 0 0 0 5-5" vector-effect="non-scaling-stroke" />
      <line x1="12" y1="12" x2="12" y2="20" vector-effect="non-scaling-stroke" />
      <polyline points="10 16 12 18 14 16" vector-effect="non-scaling-stroke" />
    </g>
    <text x="85" y="50" class="stage-title diagram-font" font-size="20" font-weight="bold">1. Provide Context</text>
    <text x="85" y="75" class="stage-subtitle diagram-font" font-size="14">User provides schemas, statistics, and rules.</text>
    
    <g transform="translate(130, 180)">
      <g class="icon-sub" stroke-width="1.5" fill="none" transform="scale(1.666)">
        <path d="M4 11a1 1 0 0 1 1-1h14a1 1 0 0 1 1 1v10a1 1 0 0 1-1 1H5a1 1 0 0 1-1-1v-3" vector-effect="non-scaling-stroke" />
        <path d="M8 14v.01" vector-effect="non-scaling-stroke" />
        <path d="M12 14v.01" vector-effect="non-scaling-stroke" />
        <path d="M16 14v.01" vector-effect="non-scaling-stroke" />
        <path d="M8 18v.01" vector-effect="non-scaling-stroke" />
        <path d="M12 18v.01" vector-effect="non-scaling-stroke" />
        <path d="M16 18v.01" vector-effect="non-scaling-stroke" />
        <path d="M4 4a2 2 0 0 1 2-2h12a2 2 0 0 1 2 2v3H4V4z" vector-effect="non-scaling-stroke" />
      </g>
      <text x="55" y="25" class="detail-title diagram-font" font-size="16" font-weight="500">Manual Entry</text>
    </g>
    <path d="M225 240 v 29" class="arrow-path" stroke-width="2" fill="none" marker-end="url(#arrowhead)"/>
    <g transform="translate(130, 280)">
      <g class="icon-sub" stroke-width="1.5" fill="none" transform="scale(1.666)">
        <path d="M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4" vector-effect="non-scaling-stroke" />
        <polyline points="17 8 12 3 7 8" vector-effect="non-scaling-stroke" />
        <line x1="12" y1="3" x2="12" y2="15" vector-effect="non-scaling-stroke" />
      </g>
      <text x="55" y="25" class="detail-title diagram-font" font-size="16" font-weight="500">File Upload (.sql, .csv)</text>
    </g>
  </g>

  <!-- Arrow 1 -> 2 -->
  <path d="M480 300 L 519 300" class="arrow-path" stroke-width="3" fill="none" marker-end="url(#arrowhead)"/>

  <!-- Stage 2: Analysis -->
  <g transform="translate(520, 50)">
    <rect class="stage-box" width="450" height="500" rx="12" ry="12"/>
    <g class="icon-main" stroke-width="1.5" fill="none" transform="translate(30, 30) scale(1.666)">
      <path d="M12 2L9 9l-7 3 7 3 3 7 3-7 7-3-7-3-3-7z" vector-effect="non-scaling-stroke" />
    </g>
    <text x="85" y="50" class="stage-title diagram-font" font-size="20" font-weight="bold">2. AI Analysis</text>
    <text x="85" y="75" class="stage-subtitle diagram-font" font-size="14">The app queries the AI and gets structured results.</text>
    
    <g transform="translate(130, 130)">
      <g class="icon-sub" stroke-width="1.5" fill="none" transform="scale(1.666)">
        <circle cx="12" cy="12" r="10" vector-effect="non-scaling-stroke" />
        <polygon points="10 8 16 12 10 16 10 8" vector-effect="non-scaling-stroke" />
      </g>
      <text x="55" y="25" class="detail-title diagram-font" font-size="16" font-weight="500">Trigger Analysis</text>
    </g>
    <path d="M225 190 v 29" class="arrow-path" stroke-width="2" fill="none" marker-end="url(#arrowhead)"/>
    <g transform="translate(130, 230)">
      <g class="icon-sub" stroke-width="1.5" fill="none" transform="scale(1.666)">
         <path d="M12 2L9 9l-7 3 7 3 3 7 3-7 7-3-7-3-3-7z" vector-effect="non-scaling-stroke" />
      </g>
      <text x="55" y="25" class="detail-title diagram-font" font-size="16" font-weight="500">Gemini Processing</text>
    </g>
    <path d="M225 290 v 29" class="arrow-path" stroke-width="2" fill="none" marker-end="url(#arrowhead)"/>
    <g transform="translate(130, 330)">
      <g class="icon-sub" stroke-width="1.5" fill="none" transform="scale(1.666)">
        <path d="M14 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V8z" vector-effect="non-scaling-stroke" />
        <polyline points="14 2 14 8 20 8" vector-effect="non-scaling-stroke" />
        <polyline points="9 15 11 17 15 13" vector-effect="non-scaling-stroke" />
      </g>
      <text x="55" y="25" class="detail-title diagram-font" font-size="16" font-weight="500">Receive Results (JSON)</text>
    </g>
  </g>

  <!-- Arrow 2 -> 3 -->
  <path d="M970 300 L 1009 300" class="arrow-path" stroke-width="3" fill="none" marker-end="url(#arrowhead)"/>

  <!-- Stage 3: Action -->
  <g transform="translate(1010, 50)">
    <rect class="stage-box" width="450" height="500" rx="12" ry="12"/>
    <g class="icon-main" stroke-width="1.5" fill="none" transform="translate(30, 30) scale(1.666)">
      <path d="M6 20v-4M12 20V10M18 20V4" vector-effect="non-scaling-stroke"></path>
    </g>
    <text x="85" y="50" class="stage-title diagram-font" font-size="20" font-weight="bold">3. Explore & Act</text>
    <text x="85" y="75" class="stage-subtitle diagram-font" font-size="14">Visualize, ask questions, and share findings.</text>

    <g transform="translate(130, 130)">
      <g class="icon-sub" stroke-width="1.5" fill="none" transform="scale(1.666)">
        <rect x="3" y="3" width="7" height="9" vector-effect="non-scaling-stroke" />
        <rect x="14" y="3" width="7" height="5" vector-effect="non-scaling-stroke" />
        <rect x="14" y="12" width="7" height="9" vector-effect="non-scaling-stroke" />
        <rect x="3" y="16" width="7" height="5" vector-effect="non-scaling-stroke" />
      </g>
      <text x="55" y="25" class="detail-title diagram-font" font-size="16" font-weight="500">Explore Dashboard</text>
    </g>
    <path d="M225 190 v 29" class="arrow-path" stroke-width="2" fill="none" marker-end="url(#arrowhead)"/>
    <g transform="translate(130, 230)">
      <g class="icon-sub" stroke-width="1.5" fill="none" transform="scale(1.666)">
        <path d="M21 15a2 2 0 0 1-2 2H7l-4 4V5a2 2 0 0 1 2-2h14a2 2 0 0 1 2 2z" vector-effect="non-scaling-stroke" />
      </g>
      <text x="55" y="25" class="detail-title diagram-font" font-size="16" font-weight="500">Conversational AI</text>
    </g>
    <path d="M225 290 v 29" class="arrow-path" stroke-width="2" fill="none" marker-end="url(#arrowhead)"/>
    <g transform="translate(130, 330)">
      <g class="icon-sub" stroke-width="1.5" fill="none" transform="scale(1.666)">
        <path d="M15 3h4a2 2 0 0 1 2 2v14a2 2 0 0 1-2 2h-4" vector-effect="non-scaling-stroke" />
        <polyline points="10 17 15 12 10 7" vector-effect="non-scaling-stroke" />
        <line x1="15" y1="12" x2="3" y2="12" vector-effect="non-scaling-stroke" />
      </g>
      <text x="55" y="25" class="detail-title diagram-font" font-size="16" font-weight="500">Export & Share</text>
    </g>
  </g>

  <!-- Arrow 3 -> 4 -->
  <path d="M1460 300 L 1499 300" class="arrow-path" stroke-width="3" fill="none" marker-end="url(#arrowhead)"/>

  <!-- Stage 4: Goal -->
  <g transform="translate(1500, 50)">
    <rect class="stage-box" width="450" height="500" rx="12" ry="12"/>
    <g class="icon-main" stroke-width="1.5" fill="none" transform="translate(30, 30) scale(1.666)">
      <path d="M22 11.08V12a10 10 0 1 1-5.93-9.14" vector-effect="non-scaling-stroke" />
      <polyline points="22 4 12 14.01 9 11.01" vector-effect="non-scaling-stroke" />
    </g>
    <text x="85" y="50" class="stage-title diagram-font" font-size="20" font-weight="bold">4. Achieve Integrity</text>
    <text x="85" y="75" class="stage-subtitle diagram-font" font-size="14">Gain insights to improve and maintain quality.</text>
    
    <g transform="translate(130, 250)">
      <g class="icon-sub" stroke-width="1.5" fill="none" transform="scale(1.666)">
        <path d="M12 22s8-4 8-10V5l-8-3-8 3v7c0 6 8 10 8 10z" vector-effect="non-scaling-stroke" />
        <polyline points="9 12 11 14 15 10" vector-effect="non-scaling-stroke" />
      </g>
      <text x="55" y="25" class="detail-title diagram-font" font-size="16" font-weight="500">Achieve Data Integrity</text>
    </g>
  </g>
</svg>
